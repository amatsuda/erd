<div>
  <div id="erd_container">
    <%=raw @erd %>
  </div>

  <div id="migration">
    <%- if flash[:generated_migrations].present? -%>
      <div id="generated">
        generated migrations (please run rake db:migrate)
        <ul>
        <%- flash[:generated_migrations].each do |m| -%>
          <li><%= m %></li>
        <%- end -%>
        </ul>
      </div>
    <%- end -%>
    <%- if flash[:failed_migrations].present? -%>
      <div id="generated">
        failed migrations
        <ul>
        <%- flash[:failed_migrations].each do |m| -%>
          <li><%= m %></li>
        <%- end -%>
        </ul>
      </div>
    <%- end -%>
    <table id="changes">
      <thead><tr><th>action</th><th>model</th><th>column</th><th>from</th><th>to</th></tr></thead>
      <tbody></tbody>
    </table>
    <%= form_tag '/erd', :method => :put, :id => 'changes_form' do %>
      <%= hidden_field_tag 'changes' %>
      <%= submit_tag 'save changes' %>
    <% end %>
  </div>
</div>
